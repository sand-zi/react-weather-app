(this["webpackJsonpreact-weather"]=this["webpackJsonpreact-weather"]||[]).push([[0],{144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(28),c=a.n(r),o=a(43),i=a(50),s=a(62),u=a(93),l=a(18),h={currLocation:{localizedName:"Tel Aviv",key:"215854",country:"Israel"},forecasts:[],searchBy:{name:""},favoriteCities:[],isDarkMode:!1,isFahrenheitOn:!1};var j=Object(s.b)({weatherModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRLOCATION":return Object(l.a)(Object(l.a)({},e),{},{currLocation:t.currLocation});case"SET_FORECASTS":return Object(l.a)(Object(l.a)({},e),{},{forecasts:t.forecasts});case"SET_FAVORITE_CITIES":return Object(l.a)(Object(l.a)({},e),{},{favoriteCities:t.favoriteCities});case"SET_SEARCH":return Object(l.a)(Object(l.a)({},e),{},{searchBy:t.searchBy});case"SET_THEME_MODE":return Object(l.a)(Object(l.a)({},e),{},{isDarkMode:t.isDarkMode});case"SET_TEMPERATURE_CONVERSION":return Object(l.a)(Object(l.a)({},e),{},{isFahrenheitOn:t.isFahrenheitOn});default:return e}}}),d=Object(s.c)(j,Object(s.a)(u.a)),b=a(17),p=a(2),O=function(){return Object(p.jsx)("header",{className:"app-header",children:Object(p.jsx)("nav",{className:"main-nav",children:Object(p.jsxs)("ul",{className:"flex auto-center clean-list column-gap",children:[Object(p.jsx)("li",{children:Object(p.jsx)(o.b,{className:"main-link",exact:!0,to:"/",children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(o.b,{className:"main-link",to:"/favorites",children:"Favorites"})})]})})})},f=function(){return Object(p.jsx)("div",{className:"favorites-page",children:"Hello  i am favorite cities page"})},v=a(12),x=a(16),m=a.n(x),g=a(23),y=a(60),w=a.n(y),k={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},getCurrentPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,a){navigator.geolocation.getCurrentPosition(t,a,e)}))}};var S={load:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},save:function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)}};var C={getLocation:function(){return T.apply(this,arguments)},getForecastByLocationKey:function(e){return E.apply(this,arguments)},getLocationsList:function(e){return R.apply(this,arguments)},saveLocation:function(e){S.save(N,Object(l.a)(Object(l.a)({},e),{},{date:Date.now()}))}},L="CurrForecast",N="CurrLocation",F="sh0OUQ7RvtXa9uUhfJCXLc3lNEqpVCeS",I={localizedName:"Tel Aviv",key:"215854",country:"Israel"};function T(){return(T=Object(g.a)(m.a.mark((function e(){var t,a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S.load(N)||null){e.next=18;break}return e.prev=2,e.next=5,k.getCurrentPosition();case 5:return a=e.sent,n=a.coords,r=n.latitude,c=n.longitude,e.next=10,A(r,c);case 10:t=e.sent,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.log("getLocation error",e.t0),t=Object(l.a)({},I);case 17:S.save(N,Object(l.a)(Object(l.a)({},t),{},{date:Date.now()}));case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function E(){return(E=Object(g.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("http://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(F,"&metric=true"));case 3:if(!(a=e.sent).data.DailyForecasts.length){e.next=10;break}return n=a.data.DailyForecasts.map((function(e){return M(e)})),S.save(L,{forecasts:n,date:Date.now()}),e.abrupt("return",n);case 10:return e.abrupt("return",[]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("getForecastByLocationKey function from weatherService",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function A(e,t){return D.apply(this,arguments)}function D(){return(D=Object(g.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=".concat(F,"&q=").concat(t,",").concat(a));case 3:return n=e.sent,e.abrupt("return",P(n.data.LocalizedName,n.data.Key,n.data.Country.LocalizedName));case 7:e.prev=7,e.t0=e.catch(0),console.log("getLocationCodeByGeoLocation does not respond",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function R(){return(R=Object(g.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(F,"&q=").concat(t));case 3:if((a=e.sent).data&&0!==a.data.length){e.next=6;break}return e.abrupt("return",[]);case 6:return n=a.data.map((function(e){return P(e.LocalizedName,e.Key,e.Country.LocalizedName,!0)})),e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log("There is an error in getLocationsList function",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function P(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n?{localizedName:e,key:t,country:a,id:k.makeId()}:{localizedName:e,key:t,country:a}}function M(e){var t=new Date(e.Date);return{forecastId:k.makeId(),date:t.toDateString(),dayForecast:{icon:e.Day.Icon,iconPhrase:e.Day.IconPhrase,temperature:e.Temperature.Maximum.Value},nightForecast:{icon:e.Night.Icon,iconPhrase:e.Night.IconPhrase,temperature:e.Temperature.Minimum.Value}}}var _=a(5),z=a(191),B=a(193),U=a(194),H=a(188),J=Object(_.a)("img")({margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"});String.fromCodePoint(parseInt("0x2103",16));var K=function(e){var t=e.forecast,a=e.isFahrenheit,r=(e.setIsFahrenheit,Object(n.useState)(!0)),c=Object(v.a)(r,2),o=c[0],i=c[1],s=a?String.fromCodePoint(parseInt("0x2109",16)):String.fromCodePoint(parseInt("0x2103",16)),u=function(e){return a?9*e/5+32:e};return Object(p.jsx)("div",{className:"forecast-preview",children:Object(p.jsx)(B.a,{sx:{p:2,margin:"auto",flexGrow:1,width:200},children:Object(p.jsxs)(z.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(z.a,{item:!0,children:Object(p.jsx)(H.a,{sx:{width:128,height:128},children:Object(p.jsx)(J,{alt:"complex",src:"./images/".concat(o?t.dayForecast.icon:t.nightForecast.icon,".png")})})}),Object(p.jsx)(z.a,{item:!0,xs:12,sm:!0,container:!0,children:Object(p.jsxs)(z.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:[Object(p.jsxs)(z.a,{item:!0,xs:!0,children:[Object(p.jsx)(U.a,{gutterBottom:!0,variant:"body2",component:"div",textAlign:"center",children:t.date}),Object(p.jsx)(U.a,{variant:"body2",gutterBottom:!0,textAlign:"center",children:o?t.dayForecast.iconPhrase:t.nightForecast.iconPhrase}),Object(p.jsxs)(U.a,{variant:"body2",color:"text.secondary",textAlign:"center",children:[u(o?+t.dayForecast.temperature:+t.nightForecast.temperature),s]})]}),Object(p.jsx)(z.a,{item:!0,children:Object(p.jsxs)(U.a,{sx:{cursor:"pointer"},variant:"body2",onClick:function(){return i(!o)},textAlign:"center",children:["Check ",o?"Night":"Day"," Forecast"]})})]})})]})})})},V=a(195),q=a(196),G=a(197),W=a(97),X=a.n(W),Q=a(96),Z=a.n(Q),Y=a(95),$=a.n(Y),ee=function(e){var t=e.isFahrenheit,a=e.setIsFahrenheit,r=Object(n.useState)(!1),c=Object(v.a)(r,2),o=c[0],i=c[1];return Object(p.jsx)("section",{className:"current-location",children:Object(p.jsxs)(V.a,{maxWidth:"sm",children:[Object(p.jsx)(q.a,{}),Object(p.jsxs)(q.a,{children:[Object(p.jsxs)(G.a,{variant:"outlined",startIcon:Object(p.jsx)($.a,{}),onClick:function(){return a(!t)},children:["Show Temperature in ",t?"Fahrenheit":"Celsius"]}),Object(p.jsx)(G.a,{variant:"outlined",startIcon:o?Object(p.jsx)(Z.a,{}):Object(p.jsx)(X.a,{}),onClick:function(){return i(!o)},children:"Add To Favorites"})]})]})})},te=function(e){var t=e.forecasts,a=Object(n.useState)(!1),r=Object(v.a)(a,2),c=r[0],o=r[1];return Object(p.jsxs)("div",{className:"forecast-list",children:[Object(p.jsx)(ee,{isFahrenheit:c,setIsFahrenheit:o}),Object(p.jsx)(z.a,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},children:t.map((function(e){return Object(p.jsx)(z.a,{item:!0,children:Object(p.jsx)(K,{forecast:e,isFahrenheit:c,setIsFahrenheit:o})},e.forecastId)}))})]})},ae=a(15),ne=a(98),re=a.n(ne),ce=a(187),oe=a(77),ie=function(e){var t=e.setOptions,a=Object(n.useState)(""),r=Object(v.a)(a,2),c=r[0],o=r[1],i=function(){var e=Object(g.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getLocationsList(a);case 2:(n=e.sent).length&&t(Object(ae.a)(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=Object(n.useRef)(re()((function(e){return i(e)}),2e3)).current,u=function(e){var t=e.target.value;o(t);var a,n=/^[a-zA-Z\s]*$/.test(t);if(t.length>0&&n)s(t);else if(t.length>0)return a="The search is available on English only",void oe.b.error(a,{autoClose:3e3,toastId:"error-toast"})};return Object(p.jsxs)("div",{className:"weather-search",children:[Object(p.jsx)(oe.a,{}),Object(p.jsx)(ce.a,{value:c,onChange:function(e){return u(e)},label:"Location Search",variant:"outlined"})]})},se=a(189),ue=a(198),le=function(e){var t=e.option,a=e.onSelectLocation,n="".concat(t.localizedName," - ").concat(t.country);return Object(p.jsx)(se.a,{className:"option-preview",button:!0,onClick:function(){a(t)},children:Object(p.jsx)(ue.a,{primary:n})},t.id)},he=a(192),je=function(e){var t=e.options,a=e.onSelectLocation;return Object(p.jsx)(he.a,{children:t.map((function(e){return Object(p.jsx)(le,{option:e,onSelectLocation:a},e.id)}))})},de=function(){var e=Object(i.c)((function(e){return e.weatherModule})),t=e.currLocation,a=e.forecasts,r=Object(n.useState)([]),c=Object(v.a)(r,2),o=c[0],s=c[1],u=Object(i.b)();Object(n.useEffect)((function(){u(function(){var e=Object(g.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.getLocation();case 3:a=e.sent,t({type:"SET_CURRLOCATION",currLocation:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("there is a problem in loading currLocation in loadCurrentLocation action",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[u]),Object(n.useEffect)((function(){u(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"215854";return function(){var t=Object(g.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.getForecastByLocationKey(e);case 3:n=t.sent,a({type:"SET_FORECASTS",forecasts:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("there is a problem in loading forecasts in loadForeacsts action",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(t.key))}),[u]);var h=Object(n.useCallback)((function(e){u(function(e){return C.saveLocation(e),function(t){return t({type:"SET_CURRLOCATION",currLocation:e})}}(Object(l.a)({},e))),s([])}),[u]);return Object(p.jsxs)("div",{className:"weather-app",children:[Object(p.jsxs)("div",{className:"weather search",children:[Object(p.jsx)(ie,{setOptions:s}),o.length>0&&Object(p.jsx)(je,{options:o,onSelectLocation:h})]}),a.length>0&&Object(p.jsx)(te,{forecasts:a})]})},be=function(){return Object(p.jsx)("div",{className:"home-page",children:Object(p.jsx)(de,{})})};a(143);var pe=function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(O,{}),Object(p.jsxs)(b.c,{children:[Object(p.jsx)(b.a,{path:"/favorites",component:f}),Object(p.jsx)(b.a,{path:"/",exact:!0,component:be})]})]})};c.a.render(Object(p.jsx)(i.a,{store:d,children:Object(p.jsx)(o.a,{children:Object(p.jsx)(pe,{})})}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.03b47cf8.chunk.js.map